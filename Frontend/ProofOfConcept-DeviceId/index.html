<h1>ReSign DeviceId Test Website</h1>


<script>

	function onDeviceFetch(devices) {
		let result = undefined;

		devices.forEach(function(device) {
			if(device.kind === 'videoinput') {
				if(result == undefined) {
					document.write(device.kind + ": ");
					document.write(device.deviceId);

					document.write("<br>");
					result = device;
				}
			}
		});

		return result;
	}

	function requestCameraPermission() {

	}
	/*
	var cameraStream = navigator.mediaDevices.getUserMedia({ audio: false, video: true }).then((stream) => {
		//Ask (force) for camera permission
		stream.getVideoTracks().forEach(function(track) {
			track.stop();
		});

		*/

		//Ask (force) for camera permission
		requestCameraPermission();

		//List devices
		if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
			document.write("enumerateDevices() not supported.<br>");
		}else {
			// List cameras and microphones (all devices where we have permissions)

			navigator.mediaDevices.enumerateDevices()
			.then(onDeviceFetch)
			.catch(function(err) {
				document.write(err.name + ": " + err.message);
			});
		}
	//});

</script>