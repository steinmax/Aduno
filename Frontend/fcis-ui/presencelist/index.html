<!DOCTYPE html>
<html lang="de">
<head>
  <base href="/s.rausch-schott/presencelist/">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Aduno</title>
  <!--
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="style.css">
  -->
</head>
<body> 
	<img src="images/aduno_blueOnWhite01.png" style="width: 10vw;">
    <!--
    <form class="form">
      <div class="form__group">
        <label for="classSelect">Klassenauswahl:</label>
        <select id="classSelect" name="class" data-dropdown onchange="() => onClassSelection()">
		      <option> -- Bitte wählen Sie eine Klasse aus -- </option>
          <option value="1">1TEST</option>
       </select>
      </div>
    </form>
  
  <script src="dropdown.js"></script>
  -->

  <label for="classSelect">Klassenauswahl:</label>
  <select id="classSelect" onchange="onClassSelection()">
    <option value="undefined" id="placeholderOption">--- Klasse auswählen ---</option>
    <!-- 
    <option value="1">4CHIF</option>
    <option value="2">5CHIF</option>
    -->
  </select>

  <script>
    function onClassSelection() {
          console.log("selection changed");

      const selectElement = document.getElementById("classSelect");
      const selectedValue = selectElement.options[selectElement.selectedIndex].value;
      
      if(selectedValue != undefined && selectedValue !== 'undefined') {
        //Redirect to presencelist
        window.location.href = `./list/index.html?classId=${selectedValue}`;
      }
    }

    const handleClassesCreateDOMElements = function (classes) {
      classes.forEach(element => {
        const newOption = document.createElement('option');
        newOption.value = element.id;
        newOption.innerHTML = element.name;

        //Append element to select element
        document.getElementById('classSelect').appendChild(newOption);
      });
    }
  </script>

  <script>
    //Load classes from API
    const reqUrlExt = "/class";
    const classes = getResponse("GET", reqUrlExt, undefined)
                      .then(handleClassesCreateDOMElements);
  </script>
</body>
</html>